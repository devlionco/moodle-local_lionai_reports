{"version":3,"file":"main.min.js","sources":["../src/main.js"],"sourcesContent":["/* eslint-disable no-debugger */\n/* eslint-disable jsdoc/empty-tags */\n/* eslint-disable no-console */\n// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Javascript to initialise the main function.\n *\n * @module     local_smartreport/main\n * @package    local_smartreport\n * @copyright  2023 Devlion.co <info@devlion.co>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport Ajax from \"core/ajax\";\nimport Templates from \"core/templates\";\nimport * as SmartReport from \"./report\";\nimport spinneroverlay from \"./spinneroverlay\";\n\nvar SELECTORS = {\n  MAINELEMENT: \"smartreport-area\",\n  LIST: \"smartreport-list\",\n  REPORT: \"smartreport-report\",\n};\n\nconst getList = () =>\n  Ajax.call([\n    {\n      methodname: \"local_smartreport_getlist\",\n      args: {},\n    },\n  ])[0];\n\nconst renderList = (listData) => {\n  listData = JSON.parse(listData);\n  Templates.render(\"local_smartreport/list\", listData)\n    .then(function (html, js) {\n      Templates.appendNodeContents(\n        document.getElementById(SELECTORS.MAINELEMENT),\n        html,\n        js\n      );\n\n      spinneroverlay.hidespinneroverlay();\n\n      return;\n    })\n    .catch();\n};\n\nexport const init = async (id) => {\n  console.log(\"id\", id);\n\n  spinneroverlay.initspinneroverlay();\n  spinneroverlay.showspinneroverlay();\n\n  if (id == 0) {\n    // Generate list\n    const response = await getList();\n    const listData = response.data;\n    renderList(listData);\n  }\n\n  if (id != 0) {\n    SmartReport.init(id);\n  }\n};\n"],"names":["SELECTORS","async","console","log","id","initspinneroverlay","showspinneroverlay","listData","JSON","parse","render","then","html","js","appendNodeContents","document","getElementById","hidespinneroverlay","catch","renderList","Ajax","call","methodname","args","data","SmartReport","init"],"mappings":";;;;;;;;s4BAgCIA,sBACW,iCA8BKC,MAAAA,QAClBC,QAAQC,IAAI,KAAMC,4BAEHC,6CACAC,qBAEL,GAANF,GAAS,CAvBKG,CAAAA,WAClBA,SAAWC,KAAKC,MAAMF,6BACZG,OAAO,yBAA0BH,UACxCI,MAAK,SAAUC,KAAMC,uBACVC,mBACRC,SAASC,eAAehB,uBACxBY,KACAC,4BAGaI,wBAIhBC,SAaDC,QAlCFC,cAAKC,KAAK,CACR,CACEC,WAAY,4BACZC,KAAM,MAEP,IA4ByBC,MAIlB,GAANpB,IACFqB,YAAYC,KAAKtB"}